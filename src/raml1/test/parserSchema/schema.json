{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "oneOf": [
    {"$ref": "#/definitions/RAML10Api"},
    {"$ref": "#/definitions/RAML10Library"},
    {"$ref": "#/definitions/RAML10Extension"},
    {"$ref": "#/definitions/RAML10Overlay"},
    {"$ref": "#/definitions/RAML10TypeDeclaration"},
    {"$ref": "#/definitions/RAML10SecurityScheme"},
    {"$ref": "#/definitions/RAML10Trait"},
    {"$ref": "#/definitions/RAML10ExampleSpec"},
    {"$ref": "#/definitions/RAML10ResourceType"},

    {"$ref": "#/definitions/RAML08"}
  ],
  "definitions": {
    "RAML10": {
      "properties": {
        "ramlVersion": {
          "type": "string",
          "pattern": "RAML10"
        },
        "errors": {
          "type": "array"
        }
      },
      "additionalProperties": false
    },
    "RAML10Api": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Api"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Library": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Library"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "usage": {
              "type": "string"
            },
            "annotations": {"$ref": "#/definitions/LibraryBase/properties/annotations"},
            "uses": {"$ref": "#/definitions/LibraryBase/properties/uses"},
            "types": {"$ref": "#/definitions/LibraryBase/properties/types"},
            "resourceTypes": {"$ref": "#/definitions/LibraryBase/properties/resourceTypes"},
            "traits": {"$ref": "#/definitions/LibraryBase/properties/traits"},
            "securitySchemes": {"$ref": "#/definitions/LibraryBase/properties/securitySchemes"},
            "annotationTypes": {"$ref": "#/definitions/LibraryBase/properties/annotationTypes"}
          },
          "additionalProperties": false
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Extension": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Extension"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Overlay": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Overlay"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10TypeDeclaration": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "enum": ["StringTypeDeclaration", "ObjectTypeDeclaration", "TypeDeclaration"]
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10SecurityScheme": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "enum": ["SecurityScheme", "OAuth2SecurityScheme"]
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Trait": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Trait"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10ExampleSpec": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "ExampleSpec"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10ResourceType": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "ResourceType"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },

    "LibraryBase": {
      "type": "object",
      "properties": {
        "uses": {"$ref": "#/definitions/FragmentDeclaration/properties/uses"},
        "annotations": {"$ref": "#/definitions/FragmentDeclaration/properties/annotations"},
        "schemas": {
          "type": "array"
        },
        "types": {
          "type": "array",
          "items": {
            "type": "object",
            "patternProperties": {
              "^[a-zA-Z0-9]+": {"$ref": "#/definitions/TypeDeclaration"}
            }
          }
        },
        "resourceTypes": {
          "type": "array"
        },
        "traits": {
          "type": "array"
        },
        "securitySchemes": {
          "type": "array"
        },
        "annotationTypes": {
          "type": "array"
        }
      },
      "additionalProperties": false
    },
    "Type": {
      "oneOf": [
        {"$ref": "#/definitions/TypeDeclaration"},
        {"$ref": "#/definitions/ArrayTypeDeclaration"}
      ]
    },
    "ArrayTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "example": {"$ref": "#/definitions/TypeDeclaration/properties/example"},
        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"},
        "items":  {
          "oneOf": [
            {"type": "string"},
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ]
        }
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required", "items"],
      "additionalProperties": false
    },

    "TypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/Annotable/properties/annotations"},
        "name": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/Type"}
          }
        },
        "required": {
          "type": "boolean"
        },
        "displayName": {
          "type": "string"
        },
        "type": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "facets": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/Type"}
          }
        },
        "example": {
          "type": ["object", "boolean", "number", "array"]
        },
        "structuredExample": {"$ref": "#/definitions/ExampleSpec10"},
        "__METADATA__": {
          "type": "object"
        }
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },

    "FragmentDeclaration": {
      "type": "object",
      "properties": {
        "uses": {
          "type": "array",
          "items": {"$ref": "#/definitions/UsesDeclaration"}
        },
        "annotations": {"$ref": "#/definitions/Annotable/properties/annotations"}
      },
      "additionalProperties": false
    },

    "UsesDeclaration": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": ["key", "value"],
      "additionalProperties": false
    },

    "Annotable": {
      "type": "object",
      "properties": {
        "annotations": {
          "type": "object"
        }
      },
      "additionalProperties": false
    },

    "ExampleSpec10": {
      "type": "object",
      "properties": {
        "value": {
          "type": "string"
        },
        "strict": {
          "type": "boolean"
        },
        "name": {
          "type": ["string", "null"]
        },
        "structuredValue": {
          "type": ["object", "boolean", "number", "array"]
        }
      },
      "required": ["value", "strict", "name", "structuredValue"],
      "additionalProperties": false
    },

    "RAML08": {
      "type": "object",
      "properties": {
        "ramlVersion": {
          "type": "string",
          "pattern": "RAML08"
        }
      }
    }
  }
}