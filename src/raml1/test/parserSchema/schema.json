{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "oneOf": [
    {"$ref": "#/definitions/RAML10Api"},
    {"$ref": "#/definitions/RAML10Library"},
    {"$ref": "#/definitions/RAML10Extension"},
    {"$ref": "#/definitions/RAML10Overlay"},
    {"$ref": "#/definitions/RAML10TypeDeclaration"},
    {"$ref": "#/definitions/RAML10SecurityScheme"},
    {"$ref": "#/definitions/RAML10Trait"},
    {"$ref": "#/definitions/RAML10ExampleSpec"},
    {"$ref": "#/definitions/RAML10ResourceType"},

    {"$ref": "#/definitions/RAML08"}
  ],
  "definitions": {
    "RAML10": {
      "properties": {
        "ramlVersion": {
          "type": "string",
          "pattern": "RAML10"
        },
        "errors": {
          "type": "array"
        }
      },
      "additionalProperties": false
    },
    "RAML10Api": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Api"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "$ref": "#/definitions/Api10"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Library": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Library"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "usage": {
              "type": "string"
            },
            "annotations": {"$ref": "#/definitions/LibraryBase/properties/annotations"},
            "scalarsAnnotations": {"$ref": "#/definitions/LibraryBase/properties/scalarsAnnotations"},
            "uses": {"$ref": "#/definitions/LibraryBase/properties/uses"},
            "types": {"$ref": "#/definitions/LibraryBase/properties/types"},
            "resourceTypes": {"$ref": "#/definitions/LibraryBase/properties/resourceTypes"},
            "traits": {"$ref": "#/definitions/LibraryBase/properties/traits"},
            "securitySchemes": {"$ref": "#/definitions/LibraryBase/properties/securitySchemes"},
            "annotationTypes": {"$ref": "#/definitions/LibraryBase/properties/annotationTypes"}
          },
          "additionalProperties": false
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Extension": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Extension"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Overlay": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Overlay"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10TypeDeclaration": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "enum": ["StringTypeDeclaration", "ObjectTypeDeclaration", "TypeDeclaration"]
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10SecurityScheme": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "enum": ["SecurityScheme", "OAuth2SecurityScheme"]
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10Trait": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "Trait"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10ExampleSpec": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "ExampleSpec"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },
    "RAML10ResourceType": {
      "type": "object",
      "properties": {
        "ramlVersion": {"$ref": "#/definitions/RAML10/properties/ramlVersion"},
        "type": {
          "type": "string",
          "pattern": "ResourceType"
        },
        "errors": {"$ref": "#/definitions/RAML10/properties/errors"},
        "specification": {
          "type": "object"
        }
      },
      "required": ["ramlVersion", "type", "errors", "specification"],
      "additionalProperties": false
    },

    "Api10": {
      "type": "object",
      "properties": {
        "uses": {"$ref": "#/definitions/LibraryBase/properties/uses"},
        "annotations": {"$ref": "#/definitions/LibraryBase/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/LibraryBase/properties/scalarsAnnotations"},
        "schemas": {"$ref": "#/definitions/LibraryBase/properties/schemas"},
        "types": {"$ref": "#/definitions/LibraryBase/properties/types"},
        "traits": {"$ref": "#/definitions/LibraryBase/properties/traits"},
        "securitySchemes": {"$ref": "#/definitions/LibraryBase/properties/securitySchemes"},
        "annotationTypes": {"$ref": "#/definitions/LibraryBase/properties/annotationTypes"},
        "resourceTypes": {"$ref": "#/definitions/LibraryBase/properties/resourceTypes"},
        "documentation": {"$ref": "#/definitions/Documentation"},
        "title": {
          "type": ["string", "null"]
        },
        "description": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "baseUri": {
          "type": "string"
        },
        "baseUriParameters": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/TypeReference10"}
          }
        },
        "__METADATA__": {
          "type": "object"
        },
        "resources": {
          "type": "array"
        },
        "protocols": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "mediaType": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string"
            }
          ]
        },
        "securedBy": {
          "type": "array",
          "items": {
            "type": ["string", "null"]
          }
        }
      },
      "additionalProperties": false
    },

    "LibraryBase": {
      "type": "object",
      "properties": {
        "uses": {"$ref": "#/definitions/FragmentDeclaration/properties/uses"},
        "annotations": {"$ref": "#/definitions/FragmentDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/FragmentDeclaration/properties/scalarsAnnotations"},
        "schemas": {
          "type": "array"
        },
        "types": {
          "type": "array",
          "items": {
            "type": "object",
            "patternProperties": {
              "^[a-zA-Z0-9]+": {"$ref": "#/definitions/Type"}
            }
          }
        },
        "resourceTypes": {
          "type": "array"
        },
        "traits": {
          "type": "array"
        },
        "securitySchemes": {
          "type": "array"
        },
        "annotationTypes": {
          "type": "array"
        }
      },
      "additionalProperties": false
    },
    "Type": {
      "oneOf": [
        {
          "anyOf": [
            {"$ref": "#/definitions/TypeDeclaration"},
            {"$ref": "#/definitions/TypeSchemaDeclaration"},
            {"$ref": "#/definitions/StringTypeDeclaration"},
            {"$ref": "#/definitions/NumberTypeDeclaration"},
            {"$ref": "#/definitions/DateTypeDeclaration"},
            {"$ref": "#/definitions/FileTypeDeclaration"}
          ]
        },
        {"$ref": "#/definitions/ArrayTypeDeclaration"},
        {"$ref": "#/definitions/BrokenTypeDeclaration"}
      ]
    },
    "ArrayTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "description" :  {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "example": {"$ref": "#/definitions/TypeDeclaration/properties/example"},
        "uniqueItems": {
          "type": "boolean"
        },
        "minItems": {
          "type": "number"
        },
        "maxItems": {
          "type": "number"
        },
        "default": {
          "type": "array"
        },
        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"},
        "items": {"$ref": "#/definitions/TypeReference10"}
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required", "items"],
      "additionalProperties": false
    },
    "StringTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "description" :  {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "enum": {"$ref": "#/definitions/TypeDeclaration/properties/enum"},
        "pattern": {
          "type": "string"
        },
        "minLength": {
          "type": "number"
        },
        "maxLength": {
          "type": "number"
        },
        "example": {
          "type": "string"
        },

        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"}
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },
    "FileTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "description" :  {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "enum": {"$ref": "#/definitions/TypeDeclaration/properties/enum"},
        "fileTypes": {
          "type": "array"
        },
        "fixedFacets": {
          "fileTypes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "pattern": {
          "type": "string"
        },
        "minLength": {
          "type": "number"
        },
        "maxLength": {
          "type": "number"
        },
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"}
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },
    "NumberTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "description" :  {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "enum": {"$ref": "#/definitions/TypeDeclaration/properties/enum"},
        "pattern": {
          "type": "string"
        },
        "minimum": {
          "type": "number"
        },
        "maximum": {
          "type": "number"
        },
        "example": {
          "type": "number"
        },
        "format": {
          "type": "string"
        },
        "multipleOf": {
          "type": "number"
        },
        "fixedFacets": {
          "type": "object",
          "properties": {
            "maximum": {
              "type": "number"
            },
            "minimum": {
              "type": "number"
            },
            "format": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"}
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },
    "DateTypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "description" :  {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "type": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "enum": {"$ref": "#/definitions/TypeDeclaration/properties/enum"},
        "pattern": {
          "type": "string"
        },
        "format": {
          "type": ["string", "number"]
        },
        "fixedFacets": {
          "type": "object",
          "properties": {
            "format": {
              "type": ["string", "number"]
            }
          },
          "additionalProperties": false
        },
        "example": {
          "type": ["string"]
        },
        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"}
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },
    "TypeReference10": {
      "oneOf": [
        {"type": "string"},
        {
          "type": "array",
          "items": {
            "oneOF": [
              {
                "type": "string"
              },
              {"$ref": "#/definitions/Type"}
            ]
          }
        },
        {"$ref": "#/definitions/Type"}
      ]
    },
    "TypeSchemaDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/TypeDeclaration/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/TypeDeclaration/properties/scalarsAnnotations"},
        "name": {"$ref": "#/definitions/TypeDeclaration/properties/name"},
        "default": {"$ref": "#/definitions/TypeDeclaration/properties/default"},
        "description": {"$ref": "#/definitions/TypeDeclaration/properties/description"},
        "properties": {"$ref": "#/definitions/TypeDeclaration/properties/properties"},
        "enum": {"$ref": "#/definitions/TypeDeclaration/properties/enum"},
        "minProperties": {"$ref": "#/definitions/TypeDeclaration/properties/minProperties"},
        "maxProperties": {"$ref": "#/definitions/TypeDeclaration/properties/maxProperties"},
        "additionalProperties":{"$ref": "#/definitions/TypeDeclaration/properties/additionalProperties"},
        "examples": {"$ref": "#/definitions/TypeDeclaration/properties/examples"},
        "required": {"$ref": "#/definitions/TypeDeclaration/properties/required"},
        "displayName": {"$ref": "#/definitions/TypeDeclaration/properties/displayName"},
        "schema": {"$ref": "#/definitions/TypeDeclaration/properties/type"},
        "facets": {"$ref": "#/definitions/TypeDeclaration/properties/facets"},
        "fixedFacets": {"$ref": "#/definitions/TypeDeclaration/properties/fixedFacets"},
        "xml": {"$ref": "#/definitions/TypeDeclaration/properties/xml"},
        "example": {"$ref": "#/definitions/TypeDeclaration/properties/example"},
        "structuredExample": {"$ref": "#/definitions/TypeDeclaration/properties/structuredExample"},
        "__METADATA__": {"$ref": "#/definitions/TypeDeclaration/properties/__METADATA__"}
      },
      "required": ["name", "displayName", "schema", "__METADATA__", "required"],
      "additionalProperties": false
    },
    "TypeDeclaration": {
      "type": "object",
      "properties": {
        "annotations": {"$ref": "#/definitions/Annotable/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/Annotable/properties/scalarsAnnotations"},
        "name": {
          "type": "string"
        },
        "default": {
          "type": ["object", "string", "array", "number", "boolean"]
        },
        "description": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/Type"}
          }
        },
        "discriminator": {
          "type": "string"
        },
        "discriminatorValue": {
          "type": "string"
        },
        "xml": {
          "type": "object",
          "properties": {
            "attribute": {
              "type": "boolean"
            },
            "wrapped": {
              "type": "boolean"
            },
            "name": {
              "type": "string"
            },
            "namespace": {
              "type": "string"
            },
            "prefix": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "enum": {
          "type": "array"
        },
        "minProperties": {
          "type": "number"
        },
        "maxProperties": {
          "type": "number"
        },
        "additionalProperties": {
          "type": "boolean"
        },
        "examples": {
          "type": "array",
          "items": {"$ref": "#/definitions/ExampleSpec10"}
        },
        "required": {
          "type": "boolean"
        },
        "displayName": {
          "type": "string"
        },
        "type": {"$ref": "#/definitions/TypeReference10"},
        "facets": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/TypeReference10"}
          }
        },
        "fixedFacets": {
          "type": "object"
        },
        "example": {
          "type": ["object", "string", "boolean", "number", "array"]
        },
        "structuredExample": {"$ref": "#/definitions/ExampleSpec10"},
        "__METADATA__": {
          "type": "object"
        }
      },
      "required": ["name", "displayName", "type", "__METADATA__", "required"],
      "additionalProperties": false
    },

    "BrokenTypeDeclaration": {
      "type": "object",
      "properties": {
        "required": {
          "type": "boolean"
        },

        "type": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "string"
          }
        },

        "__METADATA__": {
          "type": "object"
        }
      },
      "required": ["type", "__METADATA__", "required"],
      "additionalProperties": false
    },

    "FragmentDeclaration": {
      "type": "object",
      "properties": {
        "uses": {
          "type": "array",
          "items": {"$ref": "#/definitions/UsesDeclaration"}
        },
        "annotations": {"$ref": "#/definitions/Annotable/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/Annotable/properties/scalarsAnnotations"}
      },
      "additionalProperties": false
    },

    "UsesDeclaration": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": ["key", "value"],
      "additionalProperties": false
    },

    "Annotable": {
      "type": "object",
      "properties": {
        "annotations": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9]+": {"$ref": "#/definitions/AnnotationReference"}
          }
        },
        "scalarsAnnotations": {
          "type": "object"
        }
      },
      "additionalProperties": false
    },

    "AnnotationReference": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "structuredValue": {
          "type": ["object", "string", "boolean", "number", "array"]
        }
      },
      "required": ["name", "structuredValue"],
      "additionalProperties": false
    },

    "ExampleSpec10": {
      "type": "object",
      "properties": {
        "value": {
          "type": "string"
        },
        "strict": {
          "type": "boolean"
        },
        "name": {
          "type": ["string", "null"]
        },
        "description": {
          "type": "string"
        },
        "displayName": {
          "type": "string"
        },
        "annotations": {"$ref": "#/definitions/Annotable/properties/annotations"},
        "scalarsAnnotations": {"$ref": "#/definitions/Annotable/properties/scalarsAnnotations"},
        "structuredValue": {
          "type": ["object", "boolean", "string", "number", "array"]
        }
      },
      "required": ["value", "strict", "structuredValue"],
      "additionalProperties": false
    },
    "Documentation": {
      "type": "array",
      "items": {"$ref": "#/definitions/DocumentationItem"}
    },
    "DocumentationItem": {
      "type" : "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "content": {
          "type": "string"
        }
      },
      "required": ["title", "content"],
      "additionalProperties": false
    },
    "RAML08": {
      "type": "object",
      "properties": {
        "ramlVersion": {
          "type": "string",
          "pattern": "RAML08"
        }
      }
    }
  }
}